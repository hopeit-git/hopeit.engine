{
  "title": "ServerConfig",
  "description": "Server configuration",
  "type": "object",
  "properties": {
    "streams": {
      "$ref": "#/definitions/StreamsConfig"
    },
    "logging": {
      "$ref": "#/definitions/LoggingConfig"
    },
    "auth": {
      "$ref": "#/definitions/AuthConfig"
    },
    "api": {
      "$ref": "#/definitions/APIConfig"
    },
    "engine_version": {
      "title": "Engine Version",
      "default": "0.20.0",
      "type": "string"
    }
  },
  "definitions": {
    "StreamsConfig": {
      "title": "StreamsConfig",
      "description": ":field connection_str: str, url to connect to streams server: i.e. redis://localhost:6379",
      "type": "object",
      "properties": {
        "stream_manager": {
          "title": "Stream Manager",
          "default": "hopeit.streams.NoStreamManager",
          "type": "string"
        },
        "connection_str": {
          "title": "Connection Str",
          "default": "<<NoStreamManager>>",
          "type": "string"
        },
        "delay_auto_start_seconds": {
          "title": "Delay Auto Start Seconds",
          "default": 3,
          "type": "integer"
        }
      }
    },
    "LoggingConfig": {
      "title": "LoggingConfig",
      "type": "object",
      "properties": {
        "log_level": {
          "title": "Log Level",
          "default": "INFO",
          "type": "string"
        },
        "log_path": {
          "title": "Log Path",
          "default": "logs/",
          "type": "string"
        }
      }
    },
    "AuthType": {
      "title": "AuthType",
      "description": "Supported Authorization/Authentication types",
      "enum": [
        "Unsecured",
        "Basic",
        "Bearer",
        "Refresh"
      ],
      "type": "string"
    },
    "AuthConfig": {
      "title": "AuthConfig",
      "description": "Server configuration to handle authorization tokens",
      "type": "object",
      "properties": {
        "secrets_location": {
          "title": "Secrets Location",
          "type": "string"
        },
        "auth_passphrase": {
          "title": "Auth Passphrase",
          "type": "string"
        },
        "enabled": {
          "title": "Enabled",
          "default": true,
          "type": "boolean"
        },
        "create_keys": {
          "title": "Create Keys",
          "default": false,
          "type": "boolean"
        },
        "domain": {
          "title": "Domain",
          "type": "string"
        },
        "encryption_algorithm": {
          "title": "Encryption Algorithm",
          "default": "RS256",
          "type": "string"
        },
        "default_auth_methods": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/AuthType"
          }
        }
      },
      "required": [
        "secrets_location",
        "auth_passphrase"
      ]
    },
    "APIConfig": {
      "title": "APIConfig",
      "description": "Config for Open API docs page",
      "type": "object",
      "properties": {
        "docs_path": {
          "title": "Docs Path",
          "type": "string"
        }
      }
    }
  }
}